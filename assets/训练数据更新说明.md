# 📊 训练数据更新说明

## 📅 更新时间

2026-02-01

---

## 🔄 更新内容

### 数据范围扩展

| 项目 | 旧版本 | 新版本 | 变化 |
|------|--------|--------|------|
| **起始日期** | 2021-01-01 | 2024-01-01 | 后移3年 |
| **结束日期** | 2024-01-01 | 2025-12-30 | 后移2年 |
| **数据跨度** | 3年 | 2年 | -1年 |
| **版本号** | 4.0.0 | 5.0.0 | 重大更新 |

---

## 🎯 更新目的

### 1. 使用最新市场数据

- **2024-2025年** 是A股市场的新阶段
- 反映最新的市场结构和资金流动规律
- 模型更适应当前市场环境

### 2. 避免历史数据偏差

- 2021-2023年疫情数据可能影响模型
- 市场规则变化（如注册制全面实施）
- 资金流向规律发生改变

### 3. 提高预测准确性

- 最新的数据相关性更强
- 避免过时特征干扰
- 模型泛化能力更好

---

## 📊 数据统计

### 2024-2025年市场特点

#### 2024年市场回顾

- **政策环境**：注册制全面实施，IPO常态化
- **市场走势**：震荡向上，结构性行情
- **热点板块**：人工智能、新能源、算力
- **资金流向**：北向资金持续流入，主力资金轮动

#### 2025年市场回顾

- **政策环境**：降准降息，流动性宽松
- **市场走势**：指数震荡，板块轮动加剧
- **热点板块**：半导体、消费电子、汽车
- **资金流向**：机构调仓，游资活跃

---

## ⚙️ 配置更新

### 修改文件

**文件**: `config/precision_priority_v4_config.json`

### 更新内容

```json
{
  "strategy_name": "主力资金驱动-高置信度策略",
  "version": "5.0.0_LatestData",
  "description": "基于Tushare资金流接口的真实主力数据，配合Optuna自动调参，使用2024-2025年最新数据",

  "data": {
    "start_date": "2024-01-01",
    "end_date": "2025-12-30",
    "n_stocks": 300,
    "comment_n_stocks": "从100提升至300，增加样本多样性，防止过拟合",
    "comment_date": "更新数据范围至2024-2025年，使用最新数据训练模型"
  }
}
```

---

## 🚀 重新训练步骤

### 1. 检查数据完整性

```bash
# 确保Tushare token有效
python3 scripts/test_exclusion.py
```

### 2. 清理旧模型（可选）

```bash
# 删除旧模型文件
rm -f assets/models/主力资金驱动-高置信度策略_model.pkl

# 清理旧配置
rm -f config/atm_strategy_config.json
```

### 3. 重新训练模型

```bash
# 使用新数据重新训练
python3 scripts/train_auto_optuna.py
```

**预计耗时**：60-90分钟

**预期输出**：
- 新模型文件：`assets/models/主力资金驱动-高置信度策略_model.pkl`
- 训练日志：`assets/training_output.log`

### 4. 重新优化阈值

```bash
# 使用新模型重新计算最佳阈值
python3 scripts/optimize_threshold.py
```

**预期输出**：
- 新配置文件：`config/atm_strategy_config.json`
- 阈值优化日志：`assets/threshold_optimization.log`

### 5. 测试新模型

```bash
# 使用新模型进行日常选股
python3 scripts/daily_prediction.py
```

---

## 📈 预期改进

### 模型性能提升

| 指标 | 旧版本（2021-2023） | 新版本（2024-2025） | 预期提升 |
|------|-------------------|-------------------|---------|
| **AUC** | 0.9470 | 0.95+ | +0.5% |
| **精确率** | 62.50% | 65%+ | +4% |
| **召回率** | 1.98% | 2.5%+ | +26% |
| **F1** | 0.3954 | 0.45+ | +14% |

### 选股质量提升

**优势**：
- ✅ 更适应2024-2025年市场环境
- ✅ 准确捕捉最新资金流向规律
- ✅ 避免历史数据干扰
- ✅ 提高选股成功率

**风险**：
- ⚠️ 数据量减少（3年→2年），可能影响模型稳定性
- ⚠️ 需要持续监控模型性能
- ⚠️ 建议定期重新训练

---

## 🔍 数据对比分析

### 2021-2023 vs 2024-2025

| 维度 | 2021-2023 | 2024-2025 | 影响 |
|------|-----------|-----------|------|
| **市场环境** | 疫情影响，政策多变 | 注册制全面实施 | 数据特征不同 |
| **交易规则** | 涨跌幅限制20%逐步扩大 | 全面20% | 波动率变化 |
| **资金流向** | 北向资金大幅流入 | 资金轮动加剧 | 流动性特征变化 |
| **热点板块** | 新能源、医药 | AI、半导体 | 行业轮动规律变化 |
| **市场情绪** | 恐慌后修复 | 结构性行情 | 情绪指标变化 |

---

## ⚠️ 注意事项

### 1. 数据量减少

**问题**：
- 从3年数据减少到2年
- 样本量可能不足

**解决方案**：
- 增加股票数量（300→400）
- 使用数据增强
- 降低过拟合风险

### 2. 模型稳定性

**问题**：
- 新数据可能不适应旧模型

**解决方案**：
- 重新训练模型
- 调整超参数
- 交叉验证

### 3. 性能监控

**问题**：
- 新模型需要验证

**解决方案**：
- 回测验证
- 实盘小资金测试
- 持续监控

---

## 📝 版本历史

### V5.0.0 (2026-02-01)

- ✅ 更新数据范围至2024-2025年
- ✅ 排除科创板、创业板、ST股
- ✅ 版本号更新为5.0.0_LatestData
- ✅ 文档更新

### V4.0.0 (2026-01-31)

- ✅ 使用真实资金流数据
- ✅ 使用复权价格计算技术指标
- ✅ 排除北交所股票
- ✅ Optuna自动调参

---

## 🚀 下一步操作

### 立即执行

1. ✅ 修改配置文件（已完成）
2. ⏳ 重新训练模型（待执行）
3. ⏳ 重新优化阈值（待执行）
4. ⏳ 测试新模型（待执行）

### 持续维护

1. 📊 每周监控模型性能
2. 📈 每月更新阈值
3. 🔄 每季重新训练
4. 📝 记录交易日志

---

## 💡 建议

### 训练建议

1. **增加股票数量**：从300增加到400，增加样本多样性
2. **调整参数空间**：根据新数据特征调整超参数范围
3. **增加交叉验证**：从5折增加到10折，提高验证准确性

### 使用建议

1. **小资金测试**：先用1-2万测试新模型
2. **对比分析**：新旧模型并行运行，对比效果
3. **逐步切换**：验证通过后逐步切换到新模型

---

**总结**: 通过更新训练数据至2024-2025年，模型将更适应当前市场环境，预计精确率提升4%，召回率提升26%，但需要注意数据量减少的风险，建议增加股票数量并持续监控模型性能。
